import{S as s,i as a,s as e,e as t,t as o,k as n,c as l,a as i,g as c,d as r,o as u,b as d,f,H as v,N as h,L as m,R as p,M as g,P as y,I as E,K as b}from"../chunks/vendor-026e69f7.js";import{g as w}from"../chunks/navigation-2ffed81e.js";import{A as j,u as L}from"../chunks/Env-828c620c.js";import"../chunks/singletons-12a22614.js";function x(s){let a,e,E,b,w,j,L,x,k,I,P,T,N,A,O,S,B,D,U,V,H;return{c(){a=t("form"),e=t("h1"),E=o("Login"),b=n(),w=t("div"),j=t("label"),L=o("Email"),x=n(),k=t("input"),I=n(),P=t("div"),T=t("label"),N=o("Password"),A=n(),O=t("input"),S=n(),B=t("div"),D=t("button"),U=o("Login"),this.h()},l(s){a=l(s,"FORM",{class:!0});var t=i(a);e=l(t,"H1",{class:!0});var o=i(e);E=c(o,"Login"),o.forEach(r),b=u(t),w=l(t,"DIV",{class:!0});var n=i(w);j=l(n,"LABEL",{for:!0,class:!0});var d=i(j);L=c(d,"Email"),d.forEach(r),x=u(n),k=l(n,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),n.forEach(r),I=u(t),P=l(t,"DIV",{class:!0});var f=i(P);T=l(f,"LABEL",{for:!0,class:!0});var v=i(T);N=c(v,"Password"),v.forEach(r),A=u(f),O=l(f,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),f.forEach(r),S=u(t),B=l(t,"DIV",{class:!0});var h=i(B);D=l(h,"BUTTON",{class:!0,type:!0});var m=i(D);U=c(m,"Login"),m.forEach(r),h.forEach(r),t.forEach(r),this.h()},h(){d(e,"class","text-center text-2xl font-bold"),d(j,"for","email"),d(j,"class","svelte-11g8bsn"),d(k,"type","email"),d(k,"placeholder","Enter your email"),d(k,"name","email"),d(k,"class","svelte-11g8bsn"),d(w,"class","my-1"),d(T,"for","password"),d(T,"class","svelte-11g8bsn"),d(O,"type","password"),d(O,"placeholder","Enter your password"),d(O,"name","password"),d(O,"class","svelte-11g8bsn"),d(P,"class","my-1"),d(D,"class","submit svelte-11g8bsn"),d(D,"type","submit"),d(B,"class","my-3"),d(a,"class","container mx-auto my-4")},m(t,o){f(t,a,o),v(a,e),v(e,E),v(a,b),v(a,w),v(w,j),v(j,L),v(w,x),v(w,k),h(k,s[0]),v(a,I),v(a,P),v(P,T),v(T,N),v(P,A),v(P,O),h(O,s[1]),v(a,S),v(a,B),v(B,D),v(D,U),V||(H=[m(k,"input",s[3]),m(O,"input",s[4]),m(a,"submit",p(s[2]))],V=!0)},p(s,[a]){1&a&&k.value!==s[0]&&h(k,s[0]),2&a&&O.value!==s[1]&&h(O,s[1])},i:g,o:g,d(s){s&&r(a),V=!1,y(H)}}}function k(s,a,e){let t;E(s,L,(s=>e(5,t=s)));var o=this&&this.__awaiter||function(s,a,e,t){return new(e||(e=Promise))((function(o,n){function l(s){try{c(t.next(s))}catch(a){n(a)}}function i(s){try{c(t.throw(s))}catch(a){n(a)}}function c(s){var a;s.done?o(s.value):(a=s.value,a instanceof e?a:new e((function(s){s(a)}))).then(l,i)}c((t=t.apply(s,a||[])).next())}))};let n="",l="";return[n,l,function(){var s,a,e,i;return o(this,void 0,void 0,(function*(){const o=yield fetch(`${j}/auth/local`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({identifier:n,password:l})});if(o.ok){const s=yield o.json();localStorage.setItem("token",s.jwt),s&&(b(L,t=s.user,t),w("/"))}else{const t=yield o.json();(null===(i=null===(e=null===(a=null===(s=null==t?void 0:t.message)||void 0===s?void 0:s[0])||void 0===a?void 0:a.messages)||void 0===e?void 0:e[0])||void 0===i?void 0:i.message)&&alert(t.message[0].messages[0].message)}}))},function(){n=this.value,e(0,n)},function(){l=this.value,e(1,l)}]}class I extends s{constructor(s){super(),a(this,s,k,x,e,{})}}export{I as default};
