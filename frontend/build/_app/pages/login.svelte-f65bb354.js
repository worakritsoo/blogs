import{S as s,i as a,s as e,e as t,t as o,k as n,c as l,a as i,g as c,d as r,o as u,b as d,f,H as h,N as v,L as m,R as p,M as g,P as y,I as b,K as E}from"../chunks/vendor-ad0fc7d4.js";import{g as w}from"../chunks/navigation-2ffed81e.js";import{u as j}from"../chunks/user-dcdcb249.js";import"../chunks/singletons-12a22614.js";function L(s){let a,e,b,E,w,j,L,x,k,I,P,T,N,O,S,A,B,D,U,V,H;return{c(){a=t("form"),e=t("h1"),b=o("Login"),E=n(),w=t("div"),j=t("label"),L=o("Email"),x=n(),k=t("input"),I=n(),P=t("div"),T=t("label"),N=o("Password"),O=n(),S=t("input"),A=n(),B=t("div"),D=t("button"),U=o("Login"),this.h()},l(s){a=l(s,"FORM",{class:!0});var t=i(a);e=l(t,"H1",{class:!0});var o=i(e);b=c(o,"Login"),o.forEach(r),E=u(t),w=l(t,"DIV",{class:!0});var n=i(w);j=l(n,"LABEL",{for:!0,class:!0});var d=i(j);L=c(d,"Email"),d.forEach(r),x=u(n),k=l(n,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),n.forEach(r),I=u(t),P=l(t,"DIV",{class:!0});var f=i(P);T=l(f,"LABEL",{for:!0,class:!0});var h=i(T);N=c(h,"Password"),h.forEach(r),O=u(f),S=l(f,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),f.forEach(r),A=u(t),B=l(t,"DIV",{class:!0});var v=i(B);D=l(v,"BUTTON",{class:!0,type:!0});var m=i(D);U=c(m,"Login"),m.forEach(r),v.forEach(r),t.forEach(r),this.h()},h(){d(e,"class","text-center text-2xl font-bold"),d(j,"for","email"),d(j,"class","svelte-11g8bsn"),d(k,"type","email"),d(k,"placeholder","Enter your email"),d(k,"name","email"),d(k,"class","svelte-11g8bsn"),d(w,"class","my-1"),d(T,"for","password"),d(T,"class","svelte-11g8bsn"),d(S,"type","password"),d(S,"placeholder","Enter your password"),d(S,"name","password"),d(S,"class","svelte-11g8bsn"),d(P,"class","my-1"),d(D,"class","submit svelte-11g8bsn"),d(D,"type","submit"),d(B,"class","my-3"),d(a,"class","container mx-auto my-4")},m(t,o){f(t,a,o),h(a,e),h(e,b),h(a,E),h(a,w),h(w,j),h(j,L),h(w,x),h(w,k),v(k,s[0]),h(a,I),h(a,P),h(P,T),h(T,N),h(P,O),h(P,S),v(S,s[1]),h(a,A),h(a,B),h(B,D),h(D,U),V||(H=[m(k,"input",s[3]),m(S,"input",s[4]),m(a,"submit",p(s[2]))],V=!0)},p(s,[a]){1&a&&k.value!==s[0]&&v(k,s[0]),2&a&&S.value!==s[1]&&v(S,s[1])},i:g,o:g,d(s){s&&r(a),V=!1,y(H)}}}function x(s,a,e){let t;b(s,j,(s=>e(5,t=s)));var o=this&&this.__awaiter||function(s,a,e,t){return new(e||(e=Promise))((function(o,n){function l(s){try{c(t.next(s))}catch(a){n(a)}}function i(s){try{c(t.throw(s))}catch(a){n(a)}}function c(s){var a;s.done?o(s.value):(a=s.value,a instanceof e?a:new e((function(s){s(a)}))).then(l,i)}c((t=t.apply(s,a||[])).next())}))};let n="",l="";return[n,l,function(){var s,a,e,i;return o(this,void 0,void 0,(function*(){const o=yield fetch("http://localhost:1337/auth/local",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({identifier:n,password:l})});if(o.ok){const s=yield o.json();localStorage.setItem("token",s.jwt),s&&(E(j,t=s.user,t),w("/"))}else{const t=yield o.json();(null===(i=null===(e=null===(a=null===(s=null==t?void 0:t.message)||void 0===s?void 0:s[0])||void 0===a?void 0:a.messages)||void 0===e?void 0:e[0])||void 0===i?void 0:i.message)&&alert(t.message[0].messages[0].message)}}))},function(){n=this.value,e(0,n)},function(){l=this.value,e(1,l)}]}class k extends s{constructor(s){super(),a(this,s,x,L,e,{})}}export{k as default};
