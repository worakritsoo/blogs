import{S as s,i as e,s as n,E as a,F as t,G as o,y as r,v as c,e as l,t as i,k as u,l as h,c as f,a as d,g as m,d as p,o as v,b as g,f as $,H as b,x as w,I as y,B as E,J as x,u as k,K as A,h as N,L as j}from"../chunks/vendor-bbd02ed0.js";import{u as I}from"../chunks/user-1d69e366.js";import{A as S}from"../chunks/Env-caf617d4.js";function B(s){let e,n,a,t,o,r=s[1].username+"";return{c(){e=l("a"),n=i("New"),a=u(),t=l("span"),o=i(r),this.h()},l(s){e=f(s,"A",{href:!0,class:!0});var c=d(e);n=m(c,"New"),c.forEach(p),a=v(s),t=f(s,"SPAN",{class:!0});var l=d(t);o=m(l,r),l.forEach(p),this.h()},h(){g(e,"href","/blog/new"),g(e,"class","font-mono no-underline mr-3"),g(t,"class","font-mono text-gray-500")},m(s,r){$(s,e,r),b(e,n),$(s,a,r),$(s,t,r),b(t,o)},p(s,e){2&e&&r!==(r=s[1].username+"")&&N(o,r)},d(s){s&&p(e),s&&p(a),s&&p(t)}}}function P(s){let e,n;return{c(){e=l("a"),n=i("Login"),this.h()},l(s){e=f(s,"A",{href:!0,class:!0});var a=d(e);n=m(a,"Login"),a.forEach(p),this.h()},h(){g(e,"href","/login"),g(e,"class","font-mono no-underline")},m(s,a){$(s,e,a),b(e,n)},p:j,d(s){s&&p(e)}}}function L(s){let e;const n=s[3].default,l=x(n,s,s[2],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,n){l&&l.m(s,n),e=!0},p(s,r){l&&l.p&&(!e||4&r)&&a(l,n,s,s[2],e?o(n,s[2],r,null):t(s[2]),null)},i(s){e||(r(l,s),e=!0)},o(s){c(l,s),e=!1},d(s){l&&l.d(s)}}}function O(s){let e,n,a,t,o,y,E,x,A;function N(s,e){return s[1]?B:P}let j=N(s),I=j(s),S=!s[0]&&L(s);return{c(){e=l("nav"),n=l("div"),a=l("a"),t=i("P B O X"),o=u(),y=l("section"),I.c(),E=u(),S&&S.c(),x=h(),this.h()},l(s){e=f(s,"NAV",{class:!0});var r=d(e);n=f(r,"DIV",{class:!0});var c=d(n);a=f(c,"A",{href:!0,class:!0});var l=d(a);t=m(l,"P B O X"),l.forEach(p),o=v(c),y=f(c,"SECTION",{});var i=d(y);I.l(i),i.forEach(p),c.forEach(p),r.forEach(p),E=v(s),S&&S.l(s),x=h(),this.h()},h(){g(a,"href","/"),g(a,"class","font-bold no-underline"),g(n,"class","flex items-center justify-between container mx-auto"),g(e,"class","bg-white border-b border-gray-500 py-6 px-4 w-full")},m(s,r){$(s,e,r),b(e,n),b(n,a),b(a,t),b(n,o),b(n,y),I.m(y,null),$(s,E,r),S&&S.m(s,r),$(s,x,r),A=!0},p(s,[e]){j===(j=N(s))&&I?I.p(s,e):(I.d(1),I=j(s),I&&(I.c(),I.m(y,null))),s[0]?S&&(k(),c(S,1,1,(()=>{S=null})),w()):S?(S.p(s,e),1&e&&r(S,1)):(S=L(s),S.c(),r(S,1),S.m(x.parentNode,x))},i(s){A||(r(S),A=!0)},o(s){c(S),A=!1},d(s){s&&p(e),I.d(),s&&p(E),S&&S.d(s),s&&p(x)}}}function V(s,e,n){let a,t;y(s,I,(s=>n(4,a=s))),y(s,I,(s=>n(1,t=s)));let{$$slots:o={},$$scope:r}=e;var c=this&&this.__awaiter||function(s,e,n,a){return new(n||(n=Promise))((function(t,o){function r(s){try{l(a.next(s))}catch(e){o(e)}}function c(s){try{l(a.throw(s))}catch(e){o(e)}}function l(s){var e;s.done?t(s.value):(e=s.value,e instanceof n?e:new n((function(s){s(e)}))).then(r,c)}l((a=a.apply(s,e||[])).next())}))};let l=!0;return E((()=>c(void 0,void 0,void 0,(function*(){if(!localStorage.getItem("token"))return n(0,l=!1),{props:{user:null}};const s=yield fetch(`${S}/auth/me`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),e=yield s.json();n(0,l=!1),s.ok&&A(I,a=e,a)})))),s.$$set=s=>{"$$scope"in s&&n(2,r=s.$$scope)},[l,t,r,o]}class X extends s{constructor(s){super(),e(this,s,V,O,n,{})}}export{X as default};
